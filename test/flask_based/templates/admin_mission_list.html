{% extends 'base.html' %}

{% block title %}Admin - Mission List{% endblock %}

{% block content %}
  <style>
    .admin-table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    .admin-table th, .admin-table td { border: 1px solid #ddd; padding: 10px; }
    .admin-table th { background-color: #f4f4f4; text-align: left; }
    .action-links { display: flex; gap: 10px; }
    .btn {
      padding: 5px 10px;
      color: white;
      text-decoration: none;
      border-radius: 4px;
      font-size: 0.9em;
    }
    .btn-edit { background-color: #007bff; }
    .btn-delete {
      background-color: #dc3545;
      border: none;
      font-family: Arial, sans-serif;
      cursor: pointer;
    }
    .page-header { display: flex; justify-content: space-between; align-items: center; }
    .btn-add { background-color: #28a745; }
  </style>

  <div class="page-header">
    <h1>管理任务</h1>
    <a href="{{ url_for('new_mission_form') }}" class="btn btn-add">+ 添加新任务</a>
  </div>

  <table class="admin-table">
    <thead>
      <tr>
        <th>任务名称</th>
        <th>任务 ID (mid)</th>
        <th>开始时间</th>
        <th>允许操作</th>
      </tr>
    </thead>
    <tbody>
      {% for mission in missions %}
      <tr>
        <td>{{ mission.name }}</td>
        <td>{{ mission.mid }}</td>
        <td>{{ mission.start }}</td>
        <td class="action-links">
          <a href="{{ url_for('edit_mission', mid=mission.mid) }}" class="btn btn-edit">编辑</a>
          
          <form action="{{ url_for('delete_mission', mid=mission.mid) }}" method="POST"
                onsubmit="return confirm('Are you sure you want to delete {{ mission.name }}? This is permanent.');">
            <button type"submit" class="btn btn-delete">删除</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

{% endblock %}